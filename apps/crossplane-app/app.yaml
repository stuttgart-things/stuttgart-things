---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: crossplane-app-claim-${XPLANE_APP}
  namespace: ${CROSSPLANE_NAMESPACE:-crossplane-system}
spec:
  interval: 30m
  chart:
    spec:
      chart: sthings-cluster
      version: 0.3.10
      sourceRef:
        kind: HelmRepository
        name: stuttgart-things
        namespace:  ${CROSSPLANE_NAMESPACE:-crossplane-system}
      interval: 12h
  values:
    customresources:
      claim:
        apiVersion: resources.stuttgart-things.com/v1alpha1
        kind: Registry
        metadata:
          name: registry-kubernetes-incluster
          namespace: crossplane-system
        # spec:
        #   clusterName: kubernetes-incluster
        #   deploymentNamespace: fluxdev-2.sthings-vsphere.labul.sva.de
        #   domainName: registry
        #   storageClass: nfs4-csi
        #   storageSize: 2Gi
        #   version: 2.2.3
        #   cert:
        #     secretName: registry-ingress-tls
        #     issuerName: cluster-issuer-approle
