---
apiVersion: machineshop.sthings.tiab.ssc.sva.de/v1beta1
kind: Terraform
metadata:
 name: k8s-wks
 namespace: machine-shop-operator-system
 labels:
   app.kubernetes.io/created-by: machine-shop-operator
   app.kubernetes.io/name: terraform
   app.kubernetes.io/part-of: machine-shop-operator
spec:
 backend:
 - access_key=apps/data/artifacts:accessKey
 - secret_key=apps/data/artifacts:secretKey
 module:
 - moduleName=k8s-wks
 - backendKey=k8s-wks.tfstate
 - moduleSourceUrl=https://artifacts.tiab.labda.sva.de/modules/vsphere-vm.zip
 - backendEndpoint=https://artifacts.app.4sthings.tiab.ssc.sva.de
 - backendRegion=main
 - backendBucket=vsphere-vm
 - tfProviderName=vsphere
 - tfProviderSource=hashicorp/vsphere
 - tfProviderVersion=2.4.1
 - tfVersion=1.5.5
 secrets:
 - vsphere_user=cloud/data/vsphere:username
 - vsphere_password=cloud/data/vsphere:password
 - vsphere_server=cloud/data/vsphere:ip
 - vm_ssh_user=cloud/data/vsphere:vm_ssh_user
 - vm_ssh_password=cloud/data/vsphere:vm_ssh_password
 template: vsphere-vm
 terraform-version: 1.5.5
 variables:
 - vsphere_vm_name="k8s-wks"
 - vm_count=2
 - vm_num_cpus=6
 - vm_memory=4096
 - vm_disk_size=96
 - vsphere_vm_template="/LabUL/host/Cluster01/10.31.101.40/ubuntu22"
 - vsphere_vm_folder_path="phermann/testing"
 - vsphere_network="/LabUL/host/Cluster01/10.31.101.41/MGMT-10.31.101"
 - vsphere_datastore="/LabUL/host/Cluster01/10.31.101.41/UL-ESX-SAS-01"
 - vsphere_resource_pool="/LabUL/host/Cluster01/Resources"
 - vsphere_datacenter="LabUL"