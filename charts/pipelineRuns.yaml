enableRuns: "true"
runs:
  packageHelmChartSCR:
    name: "package-sthings-alpine-1"
    addRandomDateToRunName: false
    namespace: tektoncd
    kind: Pipeline
    ref: package-publish-helmchart
    params:
      gitRepoUrl: git@github.com:stuttgart-things/stuttgart-things.git
      gitRevision: main
      gitWorkspaceSubdirectory: /helm/sthings-alpine
      helmChartPath: charts
      helmChartName: sthings-alpine
      helmChartTag: "1"
      registry: scr.app.4sthings.tiab.ssc.sva.de
      workingImage: eu.gcr.io/stuttgart-things/sthings-k8s:1.127.2
    workspaces:
      sshCredentials:
        workspaceKind: secret
        workspaceRef: github-ssh
      source:
        workspaceKind: persistentVolumeClaim
        workspaceRef: helm-tekton
      dockerconfig:
        workspaceKind: secret
        workspaceRef: scr-labda
  buildbuildahImage:
    name: builah-sthings-argocd-1
    params:
      context: /buildah/sthings-argocd/images/sthings-argocd
      tag: "1"
      gitWorkspaceSubdirectory: /helm/sthings-argocd
