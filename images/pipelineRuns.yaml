enableRuns: true
runs:
  buildahImage:
    name: builah-sthings-alpine-3.11.4-alpine3.18
    addRandomDateToRunName: false
    namespace: tektoncd
    kind: Pipeline
    ref: build-buildah-image-inline
    params:
      gitRepoUrl: git@github.com:stuttgart-things/stuttgart-things.git
      gitRevision: main
      context: /buildah/sthings-alpine/images/sthings-alpine
      gitWorkspaceSubdirectory: /buildah/sthings-alpine
      image: scr.app.4sthings.tiab.ssc.sva.de/sthings-alpine/sthings-alpine:12.6.11
      dockerfile: images/sthings-alpine/Dockerfile
      tlsVerify: false
      storagDriver: overlay
      registry: scr.app.4sthings.tiab.ssc.sva.de
      registryInlineSecret: scr-labda-inline
      tag: "3.11.4-alpine3.18"
    workspaces:
      sshCredentials:
        workspaceKind: secret
        workspaceRef: github-ssh
      sharedWorkspace:
        workspaceKind: persistentVolumeClaim
        workspaceRef: buildah-tekton
  kanikoImage:
    name: kaniko-sthings-alpine-3.11.4-alpine3.18
    addRandomDateToRunName: false
    namespace: tektoncd
    kind: Pipeline
    ref: build-kaniko-image
    params:
      gitRepoUrl: git@github.com:stuttgart-things/stuttgart-things.git
      gitRevision: main
      context: /kaniko/sthings-alpine/images/sthings-alpine
      gitWorkspaceSubdirectory: /kaniko/sthings-alpine
      image: scr.app.4sthings.tiab.ssc.sva.de/sthings-alpine/ansible
      tag: 3.11.4-alpine3.18
      registry: eu.gcr.io
      dockerfile: images/sthings-alpine/Dockerfile
    workspaces:
      sshCredentials:
        workspaceKind: secret
        workspaceRef: github-ssh
      sharedWorkspace:
        workspaceKind: persistentVolumeClaim
        workspaceRef: buildah-tekton
      dockerconfig:
        workspaceKind: secret
        workspaceRef: scr-labda
