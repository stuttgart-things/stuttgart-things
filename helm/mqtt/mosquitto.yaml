---
environments:
  homerun-dev:
    values:
      - env/{{ .Environment.Name }}.yaml

releases:
  - name: mosquitto-cm
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: stuttgart-things/sthings-cluster
    version: 0.3.10
    values:
      - "values/mosquitto-cm.values.yaml.gotmpl"

  - name: mosquitto-secret
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: stuttgart-things/sthings-cluster
    version: 0.3.10
    values:
      - "values/mosquitto-secret.values.yaml.gotmpl"

  - name: mosquitto-service
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: stuttgart-things/sthings-cluster
    version: 0.3.10
    values:
      - "values/mosquitto-service.values.yaml.gotmpl"

  - name: mosquitto-service-account
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: stuttgart-things/sthings-cluster
    version: 0.3.10
    needs:
      - mosquitto/mosquitto-service
    values:
      - "values/mosquitto-serviceaccount.values.yaml.gotmpl"

  - name: mosquitto-deployment
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: stuttgart-things/sthings-cluster
    version: 0.3.10
    values:
      - "values/mosquitto-deployment.values.yaml.gotmpl"

  - name: mosquitto
    disableValidationOnInstall: true
    installed: true
    namespace: mosquitto
    chart: k8sonlab/mosquitto
    version: 2.5.1

repositories:
  - name: stuttgart-things
    url: eu.gcr.io/stuttgart-things
    oci: true
  - name: k8sonlab
    url: https://charts.ar80.eu
    oci: false

helmDefaults:
  verify: false
  wait: true
  timeout: 600
  recreatePods: false
  force: true
