name: Build Packer Template
on:
  pull_request:
    types: [opened, reopened]

jobs:
 Build-Packer-Template:
   if: contains(github.event.pull_request.labels.*.name, 'packer')
   environment: ${{ github.event.pull_request.head.ref }}
   container:
    image: eu.gcr.io/stuttgart-things/machineshop:v1.7.2
   runs-on: ghr-stuttgart-things-sthings-cicd
   steps:
     - uses: actions/checkout@v4
     - name: Print Title of PR
       run: echo The Title of your PR is ${{ github.event.pull_request.title }}
     - name: Print branch name
       run: echo The branch name from of your PR is ${{ github.event.pull_request.head.ref }}
     - name : List file contents
       run: ls -lta packer/