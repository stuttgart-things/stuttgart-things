---
name: Dispatch Hugo
on:
  workflow_dispatch:

  push:
    branches:
      - main
    paths:
      - 'hugo/*'

jobs:
  build-hugo:
    name: Build hugo
    uses: stuttgart-things/stuttgart-things/.github/workflows/call-hugo-build.yaml@main
    with:
      environment-name: labul-vsphere
      runs-on: ghr-stuttgart-things-labda-test
      image: floryn90/hugo:0.126.1-ext-ubuntu-ci
      creation-script-path: hugo/create-sthings.sh
      site-name: sthings
      s3-bucket: hugo
      s3-endpoint: https://artifacts.app1.sthings-vsphere.labul.sva.de:443
      s3-alias: s3
    secrets: inherit
