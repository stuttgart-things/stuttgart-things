---
name: Build Ansible Collection
on:
  push:
    branches:
      - main
    paths:
      - 'ansible/collections/*'
  pull_request:
    paths:
      - 'ansible/collections/*'

jobs:
  Build-Collections:
    strategy:
      matrix:
        collection-file: [base-os, container, awx]
    uses: stuttgart-things/stuttgart-things/.github/workflows/call-ansible-collection.yaml@main
    with:
      runs-on: ghr-stuttgart-things-labda-test
      environment-name: k8s
      continue-error: false
      collection-file: ansible/collections/${{ matrix.collection-file }}.yaml
