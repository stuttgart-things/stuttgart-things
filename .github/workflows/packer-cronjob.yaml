name: Build packer vmtemplate
on:
  workflow_dispatch:
    inputs:
      os-version:
        type: choice
        description: OS-VERSION
        options:
          - ubuntu23
          - rocky9
      ansible-provisioning:
        type: choice
        description: ANSIBLE-PROVISIONING
        options:
          - baseos
          - clusternode
      env-cloud:
        type: choice
        description: ENV-CLOUD
        options:
          - labda-vsphere
          - labul-vsphere
          - labul-pve

jobs:
  Packer-Cronjob:
    runs-on: arc-runner-scale-set-stuttgart-things
    container:
      image: eu.gcr.io/stuttgart-things/machineshop:v0.1.53
    environment: k8s
    continue-on-error: false
    steps:
      - name: Checkout code
        uses: actions/checkout@v4.1.1
      - run: |
          ls -lta
          machineShop version
