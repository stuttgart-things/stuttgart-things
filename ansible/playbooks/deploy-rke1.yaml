---
- hosts: all
  become: true

  vars:
    rke_version: 1
    rke_installer_version: 1.4.8
    rke_kubernetes_version: v1.26.7-rancher1-1
    project_folder: rancher-things
    rke_create_rke_user: true
    network_plugin: calico
    rke_docker_package_version: "23.0.6"

    deploy_helm_charts: true
    helm_repositories:
      bitnami:
        url: https://charts.bitnami.com/bitnami
    helm_releases:
      nginx:
        ref: bitnami/nginx
        version:
        namespace: internet

  # pre_tasks:
  #   - name: Install Miniforge3
  #     ansible.builtin.shell: |
  #       wget -O Miniforge3.sh "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh"
  #       bash Miniforge3.sh -b -p "${HOME}/conda"
  #       source "${HOME}/conda/etc/profile.d/conda.sh"
  #       conda activate

  roles:
    - role: deploy-configure-rke